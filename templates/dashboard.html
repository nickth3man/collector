{% extends "base.html" %}

{% block title %}Dashboard - Content Collector{% endblock %}

{% block content %}
<h1>Dashboard</h1>

<div class="url-input-group">
    <form hx-post="{{ url_for('download') }}" hx-target="#active-jobs" hx-swap="beforeend" class="url-input-group" style="width: 100%">
        <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
        <input
            type="url"
            name="url"
            placeholder="Paste Instagram or YouTube URL here..."
            required
            autofocus
        >
        <button type="submit">Download</button>
    </form>
</div>

<article>
    <header>
        <h2>Active Downloads</h2>
    </header>

    <div id="active-jobs" hx-get="{{ url_for('active_jobs') }}" hx-trigger="load, every 3s" hx-swap="outerHTML">
        <div class="empty-state">
            <div class="empty-state-icon">ðŸ“¥</div>
            <p>No active downloads. Paste a URL above to get started.</p>
        </div>
    </div>
</article>

<article style="margin-top: 2rem">
    <header>
        <h2>Supported Platforms</h2>
    </header>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 1rem;">
        <div class="job-card">
            <h3 style="margin-bottom: 0.5rem;">ðŸ“º YouTube</h3>
            <p style="font-size: 0.875rem; color: var(--pico-muted-color);">
                Download videos, playlists, and channels with transcripts.
            </p>
            <div style="font-size: 0.75rem; color: var(--pico-muted-color); margin-top: 0.5rem;">
                Supports: youtube.com, youtu.be, playlists, channels
            </div>
        </div>

        <div class="job-card">
            <h3 style="margin-bottom: 0.5rem;">ðŸ“¸ Instagram</h3>
            <p style="font-size: 0.875rem; color: var(--pico-muted-color);">
                Download photos, videos, reels, and profile posts.
            </p>
            <div style="font-size: 0.75rem; color: var(--pico-muted-color); margin-top: 0.5rem;">
                Supports: Profiles, posts, reels (cookies recommended)
            </div>
        </div>
    </div>
</article>

<article style="margin-top: 2rem">
    <header>
        <h2>Quick Start</h2>
    </header>

    <ol>
        <li>Paste a YouTube or Instagram URL in the input field above</li>
        <li>Click <strong>Download</strong> to start the download</li>
        <li>Watch the progress in real-time below</li>
        <li>Browse downloaded content in the <a href="{{ url_for('browse') }}">Browse</a> section</li>
        <li>View your download history in the <a href="{{ url_for('history') }}">History</a> section</li>
    </ol>

    {% if not config.SECRET_KEY or config.SECRET_KEY == 'dev-secret-key-change-in-production' %}
    <div class="notification error" style="margin-top: 1rem;">
        <strong>Warning:</strong> Running with default SECRET_KEY. Set a proper secret key in production.
    </div>
    {% endif %}
</article>
{% endblock %}
